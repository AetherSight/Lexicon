"""
FFXIV装备标签体系定义
定义了装备图片需要标注的各种属性标签
"""

# 颜色标签
COLOR_LABELS = [
    "金色", "银色", "黑色", "白色", "红色", "蓝色", "绿色", 
    "紫色", "黄色", "橙色", "粉色", "棕色", "灰色", "透明",
    "彩虹色", "渐变色"
]

# 材质标签
MATERIAL_LABELS = [
    "金属", "布料", "皮革", "透明材质", "发光材质", "哑光", 
    "光泽", "磨砂", "丝绸", "毛皮", "水晶", "宝石", "木质",
    "石质", "骨质", "陶瓷", "玻璃", "塑料", "橡胶", "纤维",
    "合金", "精钢", "秘银", "龙鳞", "羽毛材质", "鳞片",
    "甲壳", "硬质", "软质", 
    "粗糙", "光滑", "细腻", "粗糙纹理", "编织", "针织",
    "皮革质感", "金属质感", "布料质感", 
]

# 形状特征标签
SHAPE_LABELS = [
    "细", "粗", "扁", "圆", "方", "尖", "长", "短", "宽", 
    "窄", "厚", "薄", "弯曲", "直线", "对称", "不对称",
    "椭圆形", "三角形", "菱形", "五角形", "六角形", "八角形",
    "圆柱形", "圆锥形", "球形", "立方体", "扁平", "立体",
    "流线型", "棱角分明", "圆润", "尖锐", "钝角", "锐角",
    "曲线", "折线", "波浪形", "螺旋形", "锯齿形", "不规则",
    "规整", "紧凑", "松散", "密集", "稀疏", "均匀", "不均匀",
    "层次感", "立体感", "平面", "凹凸", "起伏", "平滑",
    "宽肩", "外扩肩部轮廓"
]

# 装饰元素标签
DECORATION_LABELS = [
    "蝴蝶结", "花纹", "图案", "宝石装饰", "链条", "羽毛", 
    "流苏", "蕾丝", "刺绣", "雕刻", "镶嵌", "徽章", "符号",
    "条纹", "斑点", "网格", "格子", "几何图案", "花朵",
    "百合", "彼岸花", "玫瑰", "蔷薇", "樱花", "莲花", "菊花", "牡丹",
    "叶子", "藤蔓",
    "龙纹", "凤凰纹", "云纹", "水波纹", "火焰纹", "雷电纹",
    "星形", "月牙", "太阳", "十字", "五角星", "六芒星",
    "圆环", "螺旋", "齿轮", "锁链", "铆钉", "扣子",
    "拉链", "纽扣", "皮带扣", "金属环", "金属片", "金属条",
    "宝石", "珍珠", "水晶", "钻石", "玉石", "玛瑙", "琥珀",
    "金属丝", "金属链", "金属扣", "金属装饰", "金属边框",
    "印花", "烫金", "烫银", "压花", "浮雕",
    "镂空", "穿孔", "拼贴", "拼接",
    "补丁", "贴片", "勋章", "肩章", "袖章", "胸章",
    "腰带扣", "皮带", "束带", "系带", "绳结",
    "穗子", "毛球", "绒球", "球状装饰", "吊坠",
    "挂件", "配饰", "装饰带", "装饰条", "装饰边", "装饰线",
    "花边", "蕾丝边", "荷叶边", "波浪边", "锯齿边", "圆边",
    "尖角", "圆角", "装饰角", "装饰点", "装饰面",
    # 配件相关
    "兜帽", "帽子", "帽檐", "帽带", "肩带", "背带", "吊带",
    "腰带", "腰封", "束腰", "腰链", "腰包", "腰饰",
    "袖口", "袖带", "袖扣", "袖链",
    "领口", "领带", "领结", "领扣", "领链", "领饰",
    "口袋", "袋盖", "袋扣", "袋链",
    "拉链头", "拉链扣", "拉链带",
    "铆钉装饰", "铆钉带", "铆钉扣",
    "搭扣", "卡扣", "按扣", "暗扣", "明扣",
    "系绳", "束绳",
    "环扣", "D型环", "O型环", "金属环扣",
    "魔术贴", "粘扣", "钩扣", "扣眼",
    "拉环", "提手", "把手", "握把",
    "护肩", "肩垫", "肩饰", "肩带扣", "肩甲", "肩部装甲",
    "护膝", "护肘", "护腕", "护踝",
    # 下摆相关
    "分片下摆", "结构化下摆", "前后开衩",
    # 装饰布类
    "垂布", "围巾式装饰", "仪式披带", "纵向装饰",
    # 生物/神话元素
    "翅膀", "天使翅膀", "恶魔翅膀",
    "蝴蝶",
    "天使", "天使光环",
    "恶魔", "恶魔角",
    "龙", 
    "凤凰",
    "独角兽",
    "精灵",
    "妖精",
    "骷髅",
    "十字架", "圣十字", "倒十字",
    # 破损/状态相关
    "破洞", "破损", "撕裂", "修补", "磨损",
    "肮脏", "污渍", "陈旧", "褪色", "老化"
]

# 风格标签
STYLE_LABELS = [
    "古典", "现代", "华丽", "简约", "暗黑", "光明", "优雅",
    "粗犷", "精致", "复古", "未来感", "奇幻", "军事风", 
    "休闲", "正式", "哥特式", "巴洛克", "洛可可", "维多利亚",
    "蒸汽朋克", "赛博朋克", "废土风", "末日风", "魔法风",
    "科技风", "机械风", "工业风", "自然风", "田园风", "都市风",
    "东方风格", "西方风格", "日式", "中式", "欧式", "美式",
    "民族风", "部落风", "原始风", "文明风", "野蛮风",
    "贵族风", "平民风", "骑士风", "法师风", "盗贼风", "战士风",
    "乞丐风", "流浪风", "贫民风", "破旧风", "邋遢风",
    "圣职风", "暗黑风", "光明风", "神圣风", "邪恶风", "中性风",
    "天使风", "恶魔风", "天堂风", "地狱风", "神话风", "传说风",
    "暗法系", "祭司风", "宗教风格", "贵族暗黑",
    "男性化", "女性化", "中性化", "硬朗", "柔美", "刚柔并济",
    "庄重", "活泼", "严肃", "轻松", "随意", "隆重",
    "日常", "战斗", "仪式", "庆典", "节日",
]

# 特殊效果标签
EFFECT_LABELS = [
    "发光", "闪烁", "粒子效果", "光晕", "阴影", "反射",
    "半透明", "全透明", "渐变", "纹理"
]

# 外观类型列表（AI只能从这个列表中选择"长得像XX"）
# 注意：这些是外形描述，不是功能分类，用于描述装备看起来像什么
APPEARANCE_TYPES = [
    # 头部装备外形
    "头盔", "帽子", "头饰", "面具", "眼罩",
    # 身体装备外形
    "衣服", "上衣", "长袍", "法袍", "礼仪长袍", "铠袍", "铠甲", "胸甲", "背心",
    # 手部装备外形
    "手套", "护手", "手甲", "手环",
    # 腿部装备外形
    "裤子", "长裤", "短裤", "裙子", "腿甲",
    # 脚部装备外形
    "靴子", "鞋子", "长靴", "短靴", "凉鞋",
    # 饰品外形
    "项链", "手镯", "戒指",
    # 武器外形
    "双手剑", "单手剑", "刺剑", "武士刀", "双剑", "对剑",
    "火枪", "枪刃", "盾牌", "幻杖", "咒杖", "弓箭", "魔导书",
    "其他"  # 如果都不像，可以选择"其他"
]

# 支持的装备类型列表（仅用于验证输入，不用于AI识别）
ALLOWED_EQUIPMENT_TYPES = [
    "头部",
    "衣服",
    "手部",
    "腿部",
    "脚部",
    "项链",
    "手镯",
    "戒指",
    "双手剑",
    "单手剑",
    "刺剑",
    "武士刀",
    "双剑",
    "对剑",
    "火枪",
    "枪刃",
    "盾牌",
    "幻杖",
    "咒杖",
    "弓箭",
    "魔导书",
]

def get_allowed_equipment_types():
    """获取所有允许的装备类型列表"""
    return ALLOWED_EQUIPMENT_TYPES.copy()


def get_all_labels():
    """获取所有标签列表"""
    all_labels = []
    all_labels.extend(COLOR_LABELS)
    all_labels.extend(MATERIAL_LABELS)
    all_labels.extend(SHAPE_LABELS)
    all_labels.extend(DECORATION_LABELS)
    all_labels.extend(STYLE_LABELS)
    all_labels.extend(EFFECT_LABELS)
    return all_labels

def get_prompt_template() -> str:
    """
    生成标注提示词模板
    """
    
    prompt = """你是一个专业的FFXIV装备图片标注专家。请仔细分析这张装备图片，描述装备的外形特征和视觉属性。

**重要说明：**
- 你不需要识别装备的具体类型或名称
- 你只需要描述装备的外形、细节、颜色、风格等视觉特征
- 如果装备看起来像某种武器或装备，必须从以下列表中选择"长得像XX"：
  {appearance_types}
- 专注于视觉特征的描述，而不是功能识别

请从以下标签类别中选择所有适用的标签：

1. **颜色**：{colors}
2. **材质**：{materials}
3. **形状特征**：{shapes}
4. **装饰元素**：{decorations}
5. **风格**：{styles}
6. **特殊效果**：{effects}
7. **外观类型**：{appearance_types}（可以选择多个，例如：["双手剑", "盾牌"]）

**重要：输出格式必须严格按照以下JSON格式，不要添加任何其他文字：**

{{
    "colors": ["标签1", "标签2"],
    "materials": ["标签1"],
    "shapes": ["标签1", "标签2"],
    "decorations": ["标签1"],
    "styles": ["标签1"],
    "effects": ["标签1"],
    "appearance_looks_like": ["双手剑", "盾牌"],
    "appearance_description": "详细描述装备的外形特征和主要特点"
}}

注意：
- 如果某个类别没有适用的标签，使用空数组 []
- 标签名称必须完全匹配上面提供的标签列表
- appearance_looks_like 字段是一个数组，可以从列表中选择多个值（例如：["双手剑", "盾牌"]），如果都不像可以选择 ["其他"]
- appearance_description 字段必须填写，详细描述装备的外形特征（例如："剑身宽大，有装饰纹路，整体呈流线型"）
- 只输出纯JSON，不要添加任何解释、说明或markdown代码块"""
    
    return prompt.format(
        colors=', '.join(COLOR_LABELS),
        materials=', '.join(MATERIAL_LABELS),
        shapes=', '.join(SHAPE_LABELS),
        decorations=', '.join(DECORATION_LABELS),
        styles=', '.join(STYLE_LABELS),
        effects=', '.join(EFFECT_LABELS),
        appearance_types=', '.join(APPEARANCE_TYPES),
        appearance_types_list=', '.join(APPEARANCE_TYPES)
    )

